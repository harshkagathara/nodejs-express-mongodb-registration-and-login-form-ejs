<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="./js/main.js"></script>
	<link rel="stylesheet" href="./css/main.css">
	<title>nodejs-express-mongodb-ejs-registration-and-login-form</title>
</head>

<body>
	<div class="container">
		<div class="login-content">
			<form id="form1" method="post">
				<h1 class="title">Register Now</h1>
				<div class="mssg bg-danger">
					<p id="check"></p>
				</div>
				<div class="input-div one">
					<div class="i"> <i class="fas fa-user"></i> </div>
					<div class="div">
						<input type="email" placeholder="Email" class="input" required="" name="email"> </div>
				</div>
				<div class="input-div one">
					<div class="i"> <i class="fas fa-user"></i> </div>
					<div class="div">
						<input type="text" placeholder="Username" class="input" required="" name="username"> </div>
				</div>
				<div class="input-div one">
					<div class="i"> <i class="fas fa-user"></i> </div>
					<div class="div">
						<input type="password" placeholder="Password" class="input" required="" name="password"> </div>
				</div>
				<div class="input-div one">
					<div class="i"> <i class="fas fa-user"></i> </div>
					<div class="div">
						<input type="password" placeholder="Confirm Password" class="input" required="" name="passwordConf"> </div>
				</div> <span>   Already Registered!  <a href="/login"  id="aa">Login</a></span>
				<input type="submit" class="btn" value="Submit"> </form>
		</div>
		<div id="LangTable">
			<a href="/login" id="aa"></a>
		</div>
	</div>
	<script type="text/javascript">
		$(document).ready(function () {
			$("#form1").submit(function (event) {
				event.preventDefault();
				$.ajax({
					type: 'POST',
					url: '/',
					data: $('#form1').serialize(),
					dataType: "json",
					success: function (response) {
						if (response.Success == "Success") {
							window.location.href = "/login";
						}
						else if (response.Success == "Email is already used") {
							document.getElementById("check").innerHTML = 'Email is already used';
							setTimeout(function () {
								document.getElementById("check").innerHTML = "";
							}, 3000);
						}
						else if (response.Success == "password is not matched") {

							document.getElementById("check").innerHTML = 'password is not matched';
							setTimeout(function () {
								document.getElementById("check").innerHTML = "";
							}, 3000);
						}
					},
					error: function () {}
				})
			});
		});
	</script>
</body>

</html>
